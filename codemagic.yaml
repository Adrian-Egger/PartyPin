workflows:
  ios_sign_test:
    name: "iOS Signing Test"
    environment:
      vars:
        P12_BASE64: ""        # Einzeilig, ohne Zeilenumbruch
        P12_PASSWORD: "test"  # Dein Passwort hier rein
        MOBILEPROVISION_BASE64: ""  # Kann Base64 oder kompletter Plist-Text sein
    scripts:
      - name: "Check Signing"
        script: |
          #!/usr/bin/env bash
          set -euo pipefail

          echo "ðŸ” Check P12..."
          if [[ -z "$P12_BASE64" ]]; then echo "âŒ P12 leer"; exit 1; fi
          echo "$P12_BASE64" | base64 --decode > /tmp/cert.p12 || { echo "âŒ Decode FEHLER"; exit 1; }

          echo "ðŸ” Check MOBILEPROVISION..."
          if [[ -z "$MOBILEPROVISION_BASE64" ]]; then echo "âŒ Provisioning leer"; exit 1; fi
          echo "$MOBILEPROVISION_BASE64" | base64 --decode > /tmp/profile.mobileprovision || echo "$MOBILEPROVISION_BASE64" > /tmp/profile.mobileprovision

          echo "âœ… Beide Dateien vorhanden:"
          ls -lh /tmp/cert.p12 /tmp/profile.mobileprovision
